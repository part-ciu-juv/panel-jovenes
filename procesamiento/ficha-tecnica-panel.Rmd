---
title: "Ficha Técnica"
author: "Fondecyt Iniciación Nº1190508"
output: 
  bookdown::pdf_document2:
    toc: false
    includes:
      in_header: columns.tex
geometry: "left=2cm,right=2cm,top=2cm,bottom=2cm"      
editor_options: 
  chunk_output_type: console
header-includes:
  - \usepackage[spanish,es-tabla,es-nodecimaldot]{babel}
  - \usepackage{times}           # Times New Roman
  - \usepackage{caption}
  - \captionsetup[figure,table]{labelfont={bf},labelformat={default},labelsep=period}
  - \usepackage{graphicx}
  - \usepackage{float}
  - \usepackage{booktabs}
  - \usepackage{longtable}
  - \usepackage{array}
  - \usepackage{multirow}
  - \usepackage{wrapfig}
  - \usepackage{float}
  - \usepackage{colortbl}
  - \usepackage{pdflscape}
  - \usepackage{tabu}
  - \usepackage{threeparttable} 
always_allow_html: true  
---

```{r render, eval=FALSE, include=FALSE}
rmarkdown::render(input = here::here("procesamiento/ficha-tecnica-panel.Rmd"),
                  output_format = "bookdown::pdf_document2",
                  output_file = here::here("output/ficha-tecnica-panel.pdf"))
```

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  warning = FALSE,# mostrar advertencias durante la generación del libro de códigos
  message = FALSE,# mostrar mensajes durante la generación del libro de códigos
  error = FALSE,# no interrumpir la generación del libro de códigos en caso de errores,
                # suele ser mejor para la depuración
  echo = FALSE  # mostrar el código R
  )
```

```{r}
if (!require("pacman")) install.packages("pacman") # si no tenemos la librería packman instalada, se instala.
pacman::p_load(tidyverse, haven,codebook, ggplot2,sjPlot,knitr,kableExtra,questionr,sjlabelled) # cargamos nuestras librerías
```

```{r}
data_w01 <- read_sav(
  here::here(
    "input/data/original/Ola_1.sav"
  )
)

data_w02 <- read_sav(
  here::here(
    "input/data/original/Ola_2.sav"
  )
)

data_w03 <- read_sav(
  here::here(
    "input/data/original/Ola_3.sav"
  )
)
```


:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Título del Estudio_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
"Participación ciudadana juvenil: entre la Reproducción social y la socialización política"
:::
::::::


:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Fecha de trabajo de campo_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
Inicio: 4 de Octubre del 2021
Término: 14 de Octubre del 2021
:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Investigadores_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}

**Investigador Principal**: Daniel Miranda Fuenzalida, Investigador de MIDE UC, Escuela de Psicología de la Pontificia Universidad Católica de Chile
:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Tipo de muestra_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}

La población objetivo del estudio son jóvenes Chilenos, de edad comprendida entre 18 y 30 años, que permita evaluar el modelo empleado en grupos etarios diferentes. La muestra se elaboró a través de un muestreo no probabilístico por cuotas. Las variables empleada en la elaboración de las cuotas son sexo, edad y nivel educacional. La Tabla 1 muestra el tamaño y proporción de la población objetivo, así como la muestra lograda en las respectivas tres mediciones del estudio panel. 


```{r echo=FALSE, warning=FALSE}
#recodificar -99 como perdidos
# ola 1........................................................................
data_w01$cs_03[data_w01$cs_03==-99]<- NA
data_w01 <-
  data_w01 %>%  
  mutate(edad1 =
           case_when(cs_03 <= 20 ~ 1,         
                     cs_03 >20 & cs_03 <= 25 ~ 2,
                     cs_03 > 25  ~ 3))
data_w01$edad1 <- 
  factor(data_w01$edad1, levels=c("1","2","3"), 
         labels=c("18 - 20","21 - 25", "26 - 30"))

# ola 2........................................................................
data_w02$cs_03[data_w02$cs_03==-99]<- NA
data_w02 <-
  data_w02 %>%  
  mutate(edad1 =
           case_when(cs_03 <= 20 ~ 1,         
                     cs_03 >20 & cs_03 <= 25 ~ 2,
                     cs_03 > 25  ~ 3))
data_w02$edad1 <- 
  factor(data_w02$edad1, levels=c("1","2","3"), 
         labels=c("18 - 20","21 - 25", "26 - 30"))

# ola 3........................................................................
data_w03$cs_03[data_w03$cs_03==-99]<- NA
data_w03 <-
  data_w03 %>%  
  mutate(edad1 =
           case_when(cs_03 <= 20 ~ 1,         
                     cs_03 >20 & cs_03 <= 25 ~ 2,
                     cs_03 > 25  ~ 3))
data_w03$edad1 <- 
  factor(data_w03$edad1, levels=c("1","2","3"), 
         labels=c("18 - 20","21 - 25", "26 - 30"))
#...............................................................................
load(here::here("input/data/original/rdata-casen/casen_edadcat.Rdata"))
load(here::here("input/data/original/rdata-casen/casen_sexo.RData"))
load(here::here("input/data/original/rdata-casen/casen_educat.Rdata"))
educat   <- educat   %>% select(var=EDQ, freq,prop=rel.freq)
edadcat <- edadcat %>% select(var=edad,freq,prop=rel.freq)
sex2  <- sex2  %>% select(var=sexo,freq,prop=rel.freq)

edadcat$var <- car::recode(edadcat$var,
"'18 a 20 años'='18 - 20';
'21 a 25 años' ='21 - 25';
'26 a 30 años' ='26 - 30'")
tab1  <- bind_rows(sex2,edadcat,educat)

# Ola 1........................................................................
age01 <- questionr::freq(as_character(as_factor(data_w01$edad1))) %>% na.omit()
sex01 <- questionr::freq(as_character(as_factor(data_w01$cs_01))) %>% na.omit()
data_w01$edcat2 <- car::recode(data_w01$cs_02,recodes = "1:3=1; 4:5=2; 6=3; 7=4; 8=5; 9:10=6")
data_w01$edcat2 <- set_labels(data_w01$edcat2,labels = educat$var)
edu01 <- freq(as_character(as_factor(data_w01$edcat2)),valid = T) %>% na.omit()
edu01$var <- rownames(edu01)
age01$var <- rownames(age01)
sex01$var <- rownames(sex01)
edu01 <-edu01 %>% select(var,n,prop=`val%`)
age01 <-age01 %>% select(var,n,prop=`val%`)
sex01 <-sex01 %>% select(var,n,prop=`val%`)
tab_w01  <- bind_rows(sex01,age01,edu01)
# Ola 2........................................................................
age02 <- questionr::freq(as_character(as_factor(data_w02$edad1))) %>% na.omit()
sex02 <- questionr::freq(as_character(as_factor(data_w02$cs_01))) %>% na.omit()
data_w02$edcat2 <- car::recode(data_w02$cs_02,recodes = "1:3=1; 4:5=2; 6=3; 7=4; 8=5; 9:10=6")
data_w02$edcat2 <- set_labels(data_w02$edcat2,labels = educat$var)
edu02 <- freq(as_character(as_factor(data_w02$edcat2)),valid = T) %>% na.omit()
edu02$var <- rownames(edu02)
age02$var <- rownames(age02)
sex02$var <- rownames(sex02)
edu02 <-edu02 %>% select(var,n,prop=`val%`)
age02 <-age02 %>% select(var,n,prop=`val%`)
sex02 <-sex02 %>% select(var,n,prop=`val%`)
tab_w02  <- bind_rows(sex02,age02,edu02)

# Ola 3........................................................................
age03 <- questionr::freq(as_character(as_factor(data_w03$edad1))) %>% na.omit()
sex03 <- questionr::freq(as_character(as_factor(data_w03$cs_01))) %>% na.omit()
data_w03$edcat2 <- car::recode(data_w03$cs_02,recodes = "1:3=1; 4:5=2; 6=3; 7=4; 8=5; 9:10=6")
data_w03$edcat2 <- set_labels(data_w03$edcat2,labels = educat$var)
edu03 <- freq(as_character(as_factor(data_w03$edcat2)),valid = T) %>% na.omit()
edu03$var <- rownames(edu03)
age03$var <- rownames(age03)
sex03$var <- rownames(sex03)
edu03 <-edu03 %>% select(var,n,prop=`val%`)
age03 <-age03 %>% select(var,n,prop=`val%`)
sex03 <-sex03 %>% select(var,n,prop=`val%`)
tab_w03  <- bind_rows(sex03,age03,edu03)

# Tabla completa..............................................................
tab_full  <- 
  left_join(tab1,
            tab_w01,"var") %>%
  left_join(tab_w02,"var") %>% 
  left_join(tab_w03,"var")
#Generar tabla final
knitr::kable(na.omit(tab_full),
      digits = 1, booktabs=T,
      col.names = c(" ","Freq.","%","Freq.","%","Freq.","%","Freq.","%"),
      linesep = "",
      caption = "Distribución de muestra planificada y panel",
      format = "latex"
      ) %>% 
  kableExtra::kable_styling(full_width = FALSE,
                            latex_options = c("HOLD_position","scale_down"),
                            font_size = 8) %>% 
  kableExtra::add_header_above(c(" " = 1,"Objetivo" = 2, "Ola 1" = 2, "Ola 2" = 2, "Ola 3" = 2)) %>% 
  pack_rows("Sexo", 1, 2) %>%
  pack_rows("Edad", 3, 5) %>% 
  pack_rows("Educación", 6, 11)  %>% 
  footnote(general = "Cálculos de la muestra objetivo corresponden a la Encuesta de Caracterización Socioeconómica para el año 2017 empleando el factor de expansión regional",
           footnote_as_chunk = T,
           threeparttable = T)

```

:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Tipo de muestra_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
En términos territoriales, la muestra está conformada principalmente por las regiones Metropolitana, Valparaíso y Biobío La Tabla 2 muestra un detalle de la distribución según todas las regiones del estudio.


```{r echo=FALSE, warning=FALSE}
data_w01$region<- car::recode(data_w01$cs_04,
                          recode="c(13,25)=1;
                          c(26,113)=2; 
                          c(10,315)=3; 
                          c(4,67,332)=4; 
                          c(7,68,127,194)=5;
                          c(1,30,87,115,153,192,254,255,310,333,339,341)=6;
                          c(2,15,23,35,36,58,63,83,90,110,112,114,118,121,122,125,126,133,136,145,146,147,162,164,188,195,199,207,213,214,223,230,233,234,251,258,264,266,282,292,293,295,302,309,312,320,342)=7;
                          c(45,101,135,257,261,304,306)=8;
                          c(34,56,139,141,150,170,313)=9;
                          222=10;
                          c(11,12,19,28,41,62,66,91,106,300,314)=11;
                          c(8,29,92,216,224)=12;
                          c(202,331)=13;
                          c(32,193,235,241)=14;
                          189=15;
                          c(9,240,321)=16",as.factor = T)
data_w01$comuna.f <-as_character(as_factor(data_w01$cs_04))

data_w01$region<- factor(x = data_w01$region,levels = levels(data_w01$region),
                     labels = c("Arica y Parinacota","Tarapacá","Antofagasta","Atacama",
                                "Coquimbo","Valparaíso","Metropolitana","Gral. Lib. Bernardo O'Higgins",
                                "Región del Maule","Ñuble","Biobío","Araucanía","Los Ríos","Los Lagos","Aysén", "Magallanes y Antártica chilena"), ordered = T)
data_w01 %>% 
  select(region) %>% 
  na.omit() %>% group_by(region) %>% summarise(n=n()) %>% mutate(freq = round((n / sum(n))*100,2))%>% 
  kable(col.names = c("Región","N","%"), 
        caption = "Distribución de muestra lograda en la Ola 1 por región.",
        linesep = "",
        format = "latex",
        booktabs=T) %>% 
  kable_styling(full_width = FALSE,latex_options = c("HOLD_position"),font_size = 9)
```

:::
::::::


:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Estrategia de campo_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}

Con la finalidad de contar con datos que permitan cubrir el modelo de manera completa se propone levantar un “Estudio Panel de Participación Ciudadana Juvenil 2020-2022”. Este permitira evaluar longitudinalmente a los jóvenes durante el año uno y el año tres del proyecto, para capturar el cambio en las condiciones sociopolíticas de los jóvenes y en qué medida persisten los efectos de la socialización política familiar y/o las condiciones socioeconómicas de la familia.
este estudio cubrirá todos los aspectos presentes en el modelo analítico propuesto:caracterización socioeconómica de los padres, caracterización socioeconómica y logro académico de los hijos, caracterización de prácticas de socialización políticas familiar y caracterización de los diferentes tipos de participación ciudadana juvenil.
La entidad a cargo del trabajo de campo brinda un servicio de paneles online, dentro de los cuales se cuenta con una serie de personas que han sido previamente contactadas y que han acordado participar de este tipo de estudios vía invitación. 

:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Entidades a cargo trabajo de campo_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
La entidad a cargo del trabajo de campo fue la empresa [*Netquest*](https://www.netquest.com/es/encuestas-online-investigacion)
:::
::::::


:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Modo de aplicación_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
Cuestionario autoadministrado online. Se empleó la plataforma Qualtrics.
:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Numero de respuestas_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}

```{r}
options(knitr.kable.NA = '')
ola <- c("Ola 1", "Ola 2", "Ola 3")
n <- c(dim(data_w01)[1], dim(data_w02)[1], dim(data_w03)[1])
atri <-  c(NA, 
               1-(dim(data_w02)[1]/dim(data_w01)[1]),
               1-(dim(data_w03)[1]/dim(data_w01)[1])
           )*100

bind_cols(ola,n, atri) %>% 
  knitr::kable(col.names = c("Ola","N","% Atrición"), 
        caption = "Muestra lograda y atrición",
        linesep = "",
        digits = 2,
        booktabs=T, 
        format = "latex"
        ) %>% 
  kableExtra::kable_styling(full_width = FALSE,
                            latex_options = c("HOLD_position"))
```

:::
::::::

:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Detalles de la muestra_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
Siguiendo los estándares definidos por la _American Association for Public Opinion Research_ (AAPOR) en su novena edición [(AAPOR, 2016)](https://www.aapor.org/AAPOR_Main/media/publications/Standard-Definitions20169theditionfinal.pdf), la Tabla 3 muestra la descripción de la muestra según los criterios enunciados.

```{r}
# ola 1........................................................................
finished_w01<- data_w01 %>% 
  group_by(ci,Finished) %>%
  summarise(n=n()) %>% 
  ungroup()

screenout_w01<- data_w01 %>% 
  filter(is.na(cs_01) | is.na(cs_02) | is.na(cs_03)) %>% 
  group_by(ci) %>%
  summarise(n=n()) %>% 
  ungroup()

# ola 2........................................................................
finished_w02<- data_w02 %>% 
  group_by(Finished) %>%
  summarise(n=n()) %>% 
  ungroup()

screenout_w02<- data_w02 %>% 
  filter(is.na(cs_01) | is.na(cs_02) | is.na(cs_03)) %>% 
  summarise(n=n()) %>% 
  ungroup()

# ola 3........................................................................
finished_w03<- data_w03 %>% 
  group_by(Finished) %>%
  summarise(n=n()) %>% 
  ungroup()

screenout_w03<- data_w03 %>% 
  filter(is.na(cs_01) | is.na(cs_02) | is.na(cs_03)) %>% 
  summarise(n=n()) %>% 
  ungroup()


# DUPLICADOS: Ola 1.............................................................
ip1 <- questionr::freq(data_w01$IPAddress,total = TRUE) %>% # Frecuencia de cada IP
  rownames_to_column() %>%                              # ID para IP
  filter(n>=2)                                          # Keep IP >=2

datip01 <- data_w01 %>% 
  filter(IPAddress %in% ip1$rowname, Finished==1) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress,Finished,cs_01,cs_03, cs_02,everything ()) %>% 
  arrange(IPAddress,Finished) # Ordenar la base según IP y Finished para observar patrón 

# Paso II: Duplicados base Finished==1
ip2 <- questionr::freq(x = datip01$IPAddress,total = TRUE) %>%  # Frecuencia de cada IP
        rownames_to_column() %>%                                # ID para IP
        filter(n>=2)                                            # Keep IP >=2

datip03 <- datip01 %>% 
  filter(IPAddress %in% ip2$rowname) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress, cs_01, cs_03, cs_02, StartDate, EndDate) %>% 
  arrange(IPAddress,cs_01,cs_03,cs_02) 

dup1<- length(unique(datip03$IPAddress))
# Paso III: Casos identifos
identical_cases_w01<- datip03 %>% 
  group_by(IPAddress) %>% 
  summarise(sexo=var(cs_01,na.rm = T),       # calcular varianza grupal  
            edad=var(cs_03,na.rm = T),
            edcep=var(cs_02,na.rm = T)) %>% 
  filter(sexo==0 & edad==0 & edcep==0)      # filtrar x varianza 0 (caso identico)

n_w01 <- c(finished_w01$n[1]+finished_w01$n[2]+finished_w01$n[3],
  finished_w01$n[3],
  finished_w01$n[2],
  finished_w01$n[1],
  finished_w01$n[1],
  0,
  screenout_w01$n[2]+length(unique(identical_cases_w01$IPAddress)),
  screenout_w01$n[2],
  length(unique(identical_cases_w01$IPAddress)))

# DUPLICADOS: Ola 2.............................................................
ip1 <- questionr::freq(data_w02$IPAddress,total = TRUE) %>% # Frecuencia de cada IP
  rownames_to_column() %>%                              # ID para IP
  filter(n>=2)                                          # Keep IP >=2

datip01 <- data_w02 %>% 
  filter(IPAddress %in% ip1$rowname, Finished==1) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress,Finished,cs_01,cs_03, cs_02,everything ()) %>% 
  arrange(IPAddress,Finished) # Ordenar la base según IP y Finished para observar patrón 

# Paso II: Duplicados base Finished==1
ip2 <- questionr::freq(x = datip01$IPAddress,total = TRUE) %>%  # Frecuencia de cada IP
        rownames_to_column() %>%                                # ID para IP
        filter(n>=2)                                            # Keep IP >=2

datip03 <- datip01 %>% 
  filter(IPAddress %in% ip2$rowname) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress, cs_01, cs_03, cs_02, StartDate, EndDate) %>% 
  arrange(IPAddress,cs_01,cs_03,cs_02) 

dup1<- length(unique(datip03$IPAddress))
# Paso III: Casos identifos
identical_cases_w02<- datip03 %>% 
  group_by(IPAddress) %>% 
  summarise(sexo=var(cs_01,na.rm = T),       # calcular varianza grupal  
            edad=var(cs_03,na.rm = T),
            edcep=var(cs_02,na.rm = T)) %>% 
  filter(sexo==0 & edad==0 & edcep==0)      # filtrar x varianza 0 (caso identico)

n_w02 <- c(
  finished_w02$n[1]+finished_w02$n[2],
  finished_w02$n[2],
  finished_w02$n[1],
  0, #no hay elegible no entrevistado
  0, #no hay rechazo explicito
  0,
  screenout_w02$n[1]+length(unique(identical_cases_w02$IPAddress)),
  screenout_w02$n[1],
  length(unique(identical_cases_w02$IPAddress)))

# DUPLICADOS: Ola 3.............................................................
ip1 <- questionr::freq(data_w03$IPAddress,total = TRUE) %>% # Frecuencia de cada IP
  rownames_to_column() %>%                              # ID para IP
  filter(n>=2)                                          # Keep IP >=2

datip01 <- data_w03 %>% 
  filter(IPAddress %in% ip1$rowname, Finished==1) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress,Finished,cs_01,cs_03, cs_02,everything ()) %>% 
  arrange(IPAddress,Finished) # Ordenar la base según IP y Finished para observar patrón 

# Paso II: Duplicados base Finished==1
ip2 <- questionr::freq(x = datip01$IPAddress,total = TRUE) %>%  # Frecuencia de cada IP
        rownames_to_column() %>%                                # ID para IP
        filter(n>=2)                                            # Keep IP >=2

datip03 <- datip01 %>% 
  filter(IPAddress %in% ip2$rowname) %>% # Filtro ip duplicada y Finished=1
  select(ResponseId,IPAddress, cs_01, cs_03, cs_02, StartDate, EndDate) %>% 
  arrange(IPAddress,cs_01,cs_03,cs_02) 

dup1<- length(unique(datip03$IPAddress))
# Paso III: Casos identifos
identical_cases_w03<- datip03 %>% 
  group_by(IPAddress) %>% 
  summarise(sexo=var(cs_01,na.rm = T),       # calcular varianza grupal  
            edad=var(cs_03,na.rm = T),
            edcep=var(cs_02,na.rm = T)) %>% 
  filter(sexo==0 & edad==0 & edcep==0)      # filtrar x varianza 0 (caso identico)

n_w03 <- c(
  finished_w03$n[1]+finished_w03$n[2],
  finished_w03$n[2],
  finished_w03$n[1],
  0, #no hay elegible no entrevistado
  0, #no hay rechazo explicito
  0,
  screenout_w03$n[1]+length(unique(identical_cases_w03$IPAddress)),
  screenout_w03$n[1],
  length(unique(identical_cases_w03$IPAddress)))

# crear tabla..................................................................
options(knitr.kable.NA = '-')
library(readxl)
survey_info <- read_excel(here::here("input/templates/survey-info.xlsx"))
survey_info$code <- paste0("(",survey_info$code,")")
survey_info$n <- NULL
survey_info$n_w01 <- n_w01
survey_info$n_w02 <- n_w02
survey_info$n_w03 <- n_w03

kable(survey_info,col.names = c("Item","","Ola 1","Ola 2","Ola 3"),
      caption = "Descripción de logro",
      linesep = "",
      format = "latex",
      booktabs=T) %>% 
  kable_styling(full_width = FALSE,
                latex_options = c("HOLD_position"),
                font_size = 9) %>% 
  add_indent(c(2,3,5,8,9))
```
:::
::::::



:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Idioma_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
Español
:::
::::::


:::::: {.cols data-latex=""}
::: {.col data-latex="{0.3\textwidth}"}
_Ponderadores disponibles_
:::

::: {.col data-latex="{0.02\textwidth}"}
\ 
:::

::: {.col data-latex="{0.65\textwidth}"}
No 
:::
::::::

\pagebreak 

# Uso de base de datos

Dado el diseño longitudinal del estudio, disponemos a continuación de una breve descripción de cómo unificar la base de datos a través del identificador único de cada participante de la encuesta. Para ello, debemos seguir las siguientes indicaciones:


* la variable identificadora en las tres bases de datos es `folio_encuestado`
* si deseamos vincular una base de datos, por ejemplo, la ola 1 y ola 2, podemos emplear el siguiente código:

```{r echo=TRUE}
load(here::here("output/data_01.RData"))
load(here::here("output/data_02.RData"))

library(dplyr)

data_wide <- left_join(x = data_w01, #datos ola 1
                       y = data_w02, #datos ola 2
                       by = "folio_encuestado", #identificador 
                       #aplica sufijo a variables que se repiten entre olas
                       suffix = c("_w01",
                                  "_w02"
                                  )) 

# Revisar consistencia en variable sexo
data_wide[data_wide==-999] <- NA # declarar NA
cor(data_wide$cs_01_w01,data_wide$cs_01_w02, use="complete.obs")
```
